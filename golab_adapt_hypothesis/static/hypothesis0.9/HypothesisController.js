// Generated by CoffeeScript 1.6.3
(function() {
  "use strict";
  window.ut = window.ut || {};

  ut.tools = ut.tools || {};

  ut.tools.hypothesis = ut.tools.hypothesis || {};

  ut.tools.hypothesis.HypothesisApp.controller("HypothesisController", function($scope) {
    $scope.hypothesisSortableOptions = {
      axis: "x",
      revert: false,
      revertDuration: 50
    };
    $scope.saveHypotheses = function() {
      var dataObject;
      dataObject = {};
      dataObject.meta = $scope.meta;
      dataObject.configuration = $scope.configuration;
      dataObject.hypotheses = $scope.hypotheses;
      dataObject.templates = $scope.templates;
      return ut.commons.persistency.storeAsFile(dataObject, "hypotheses.json");
    };
    $scope.loadHypotheses = function() {
      return ut.commons.persistency.getJSonObjectFromDialog(function(errorMsg, jsonObject) {
        if (errorMsg) {
          return console.log(errorMsg);
        } else {
          if (jsonObject.meta.type === "ut.tools.hypothesis") {
            $scope.meta = jsonObject.meta;
            $scope.configuration = jsonObject.configuration;
            $scope.hypotheses = jsonObject.hypotheses;
            $scope.templates = jsonObject.templates;
            $scope.$digest();
            return ut.commons.utils.gadgetResize();
          } else {
            return alert("Could not load file.\nIs it really a hypotheses file?");
          }
        }
      });
    };
    $scope.deleteHypothesis = function(index) {
      if ($scope.hypotheses.length > 1) {
        $scope.hypotheses.splice(index, 1);
        return ut.commons.utils.gadgetResize();
      } else {
        return $scope.hypotheses[index].elements = [];
      }
    };
    $scope.addHypothesis = function() {
      $scope.hypotheses.push({
        "elements": [],
        "tested": false,
        "approved": false,
        "checkboxes": false
      });
      return setTimeout((function() {
        return ut.commons.utils.gadgetResize();
      }), 100);
    };
    $scope.meta = {
      "type": "ut.tools.hypothesis"
    };
    $scope.configuration = {
      "maxLength": 65,
      "checkboxes": false
    };
    return $scope.hypotheses = [
      {
        "elements": [],
        "tested": false,
        "approved": false,
        "checkboxes": false
      }
    ];
  });

}).call(this);

/*
//@ sourceMappingURL=HypothesisController.map
*/
