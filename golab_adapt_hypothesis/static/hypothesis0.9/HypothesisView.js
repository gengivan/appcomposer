// Generated by CoffeeScript 1.6.3
(function() {
  window.ut.tools.hypothesis.HypothesisApp.directive("hypothesis", function() {
    return {
      restrict: "A",
      template: "<table class=\"ut_tools_hypothesis_hypothesis_table\" width=\"100%\">\n  <tr width=\"100%\">\n    <td width=\"auto\" class=\"ut_tools_hypothesis_hypothesis\" ng-model=\"hypothesis\" data-drop=\"true\" jqyoui-droppable=\"{onDrop:'dropCallback'}\">\n      <div class=\"ut_tools_hypothesis_hint\" ng-hide=\"hypothesis.elements.length > 0\">Drop your elements here.</div>\n      <div ui-sortable=\"hypothesisSortableOptions\" ng-model=\"hypothesis.elements\">\n          <div ng-repeat=\"element in hypothesis.elements\"\n            class='ut_tools_hypothesis_element'\n            ng-model=\"element\"\n            ng-class='{ut_tools_hypothesis_conditional: element.type==\"conditional\",\n            ut_tools_hypothesis_free: element.type==\"free\",\n            ut_tools_hypothesis_output: element.type==\"output\",\n            ut_tools_hypothesis_input: element.type==\"input\"}'\n          >{{element.text}}</div>\n      </div>\n    </td>\n\n    <td width=\"50px\" class=\"ut_tools_hypothesis_bin\">\n      <h2><i ng-click=\"deleteHypothesis($index)\" title='Click to delete hypothesis.' class=\"ut_tools_hypothesis_icon icon icon-trash activeButton \"></i></h2>\n    </td>\n  </tr>\n</table>",
      /*
                  <div ng-show='question.checkboxes'><input type="checkbox" ng-model='question.tested' name="tested" value="tested">tested &nbsp &nbsp &nbsp</input></div>
                  <div ng-show='question.checkboxes'><input type="checkbox" ng-show='question.checkboxes' ng-model='question.approved' name="approved" value="approved">approved</input></div>
      */

      link: function(scope, element, attrs) {
        element.find(".ut_tools_hypothesis_bin").droppable({
          drop: function(event, ui) {
            $(angular.element(ui.draggable)).hide();
            return setTimeout((function() {
              var indexOfHypothesisElement;
              indexOfHypothesisElement = angular.element(ui.draggable).scope().$index;
              scope.hypothesis.elements.splice(indexOfHypothesisElement, 1);
              return scope.$digest();
            }), 100);
          }
        });
        return scope.dropCallback = function(event, ui) {
          var indexOfHypothesis, text, type;
          if (ui.draggable.hasClass("ut_tools_hypothesis_template")) {
            text = ui.draggable.text();
            if (ui.draggable.hasClass("ut_tools_hypothesis_input")) {
              type = "input";
            } else if (ui.draggable.hasClass("ut_tools_hypothesis_output")) {
              type = "output";
            } else if (ui.draggable.hasClass("ut_tools_hypothesis_conditional")) {
              type = "conditional";
            } else {
              type = "free";
              text = ui.draggable.find("[name='content']").text();
            }
            indexOfHypothesis = angular.element(element).scope().$index;
            return scope.hypotheses[indexOfHypothesis].elements.push({
              "text": text,
              "type": type
            });
          }
        };
      }
    };
  });

}).call(this);

/*
//@ sourceMappingURL=HypothesisView.map
*/
