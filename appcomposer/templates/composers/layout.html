{% import 'user/layout.html' as layout with context -%}
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<html xmlns="http://www.w3.org/1999/html">
  <head>
    <title>App Composer ::  {{ title }}</title>
    {% block meta %}
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="App Composer, the toolkit for online labs">
        <meta name="author" content="">
    {% endblock meta %}
    {% block styles %}
        <link rel="shortcut icon" href="{{ url_for('static', filename='img/favicon.ico') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='initializr/css/bootstrap.min.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='initializr/css/bootstrap-theme.min.css') }}">
<!--        <link rel="stylesheet" href="{{ url_for('static', filename='initializr/css/main.css') }}"> -->
        <style>
            body {
                  padding-top: 4px;
            }
        </style>
    {% endblock styles %}
    {% block head_js %}
        <script src="{{ url_for('static', filename='initializr/js/vendor/modernizr-2.6.2-respond-1.1.0.min.js') }}"></script>
    {% endblock head_js %}
  </head>
  <body>
    <div class="container">
        <div class="navbar navbar-default" role="navigation">
            <div class="navbar-header">
                <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#appcomposer-navbar-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="{{ url_for('index') }}">App Composer</a>
            </div>

            <div class="collapse nav-collapse" id="appcomposer-navbar-collapse">
                <ul class="nav navbar-nav">
                    <li ><a href="{{ url_for('user.index') }}">{{ gettext('Home') }}</a></li>
                    <li ><a href="{{ url_for('user.profile.index') }}">{{ gettext('Profile') }}</a></li>
                    <li ><a href="{{ url_for('user.apps.index') }}">{{ gettext('Apps') }}</a></li>
                    <li class="active" class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Composers <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            {% for composer in config['COMPOSERS'] %}
                            <li><a href="{{ url_for(composer['new_endpoint']) }}">{{ composer['name'] }}</a></li>
                            {% endfor %}
                        </ul>
                    </li>
                </ul>

                <ul class="nav navbar-nav navbar-right" style="padding-right: 10px">
                    <li><a href="{{ url_for('user.profile.index') }}"><i>{{ session.name }}</i></a></li>
                    <li><a href="{{ url_for('logout') }}">{{ gettext("Log out") }}</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="row">
            <div class="col-lg-12">
            {% with messages = get_flashed_messages(with_categories = True) %}
                {% for category, message in messages %}
                    <div class="alert alert-{% if category == 'error' %}danger{% elif category == 'success' %}success{% else %}info{% endif %}">
                        <button type="button" class="close" data-dismiss="alert">Ã—</button>
                        {{ message }}
                    </div>
                {% endfor %}
            {% endwith %}
            </div>
        </div>

    {% block body_content %}{% endblock %}
    </div>
    <hr>
    <footer>
        <div class="block-content content">
            <p style="text-align: center; font-style: italic; font-size: 10px">AppComposer, {{ gettext('the %(link)s application creator for teachers', link = '<a href="http://www.go-lab-project.eu/">Go-Lab</a>'|safe) }}.</p>
        </div>
    </footer>

    {% block scripts %}
    <script src="{{ url_for('static', filename='initializr/js/vendor/jquery-1.10.1.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='initializr/js/vendor/bootstrap.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='initializr/js/vendor/select2/select2.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='initializr/js/main.js') }}" type="text/javascript"></script>
    <script>
        $('.collapse').collapse();
    </script>
    {% endblock scripts %}
    {% block tail %}{% endblock %}
  </body>
</html>
